<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Ricci Calculus • ricci</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Ricci Calculus">
<meta name="description" content="Provides a compact R interface for performing tensor calculations. This is achieved by adding (upper and lower) index slot labeling to R’s array and making use of Ricci calculus conventions.">
<meta property="og:description" content="Provides a compact R interface for performing tensor calculations. This is achieved by adding (upper and lower) index slot labeling to R’s array and making use of Ricci calculus conventions.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ricci</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lschneiderbauer/ricci/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ricci">ricci<a class="anchor" aria-label="anchor" href="#ricci"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of {ricci} is to provide a <em>compact</em> R interface for performing <a href="https://en.wikipedia.org/wiki/Ricci_calculus" class="external-link">tensor calculations</a>. This is achieved by labeling (upper and lower) index slots of R’s <code>array</code> and making use of Ricci calculus conventions to implicitly trigger contractions and diagonal subsetting. Explicit tensor operations, such as addition, multiplication of tensors, raising and lowering indices, or the Kronecker product are also available via the standard operators (<code>*</code>, <code>+</code>, <code>-</code>). Common tensors like the Kronecker delta, Levi Civita epsilon, and certain metric tensors are provided.</p>
<p>The idea to use tensor labels to specify calculations in R is not new and is already used by the <a href="https://calculus.eguidotti.com/" class="external-link">calculus</a> package (Guidotti 2022). {ricci} uses that package behind the scenes to perform calculations. {ricci} simply provides an alternative interface to a subset of its functionality.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of ricci from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"lschneiderbauer/ricci"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>The central object is R’s <code>array</code>. Adding index slot labels allows us to perform common tensor operations implicitly.</p>
<p>For demonstration purposes we use an arbitrary array of rank 3.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lschneiderbauer/ricci" class="external-link">ricci</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># the data</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="op">(</span><span class="fl">2</span><span class="op">^</span><span class="fl">2</span><span class="op">*</span><span class="fl">3</span><span class="op">)</span>, dim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="creating-a-labeled-tensor">Creating a labeled tensor<a class="anchor" aria-label="anchor" href="#creating-a-labeled-tensor"></a>
</h3>
<p>We can use <code>a</code> to create a labeled tensor with lower index labels i, j, and k:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><annotation encoding="application/x-tex">
a_{ijk}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2x2x3] &lt;-&gt; .(-i, -j, -k)</span></span></code></pre></div>
<p>By default, indices are assumed to be lower indices. We can use a “+” prefix to create an upper index label.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow><mrow><mspace width="0.278em"></mspace><mspace width="0.278em"></mspace><mi>k</mi></mrow></msubsup><annotation encoding="application/x-tex">
a_{ij}^{\;\;k}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="op">+</span><span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2x2x3] &lt;-&gt; .(-i, -j, +k)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="performing-calculations">Performing calculations<a class="anchor" aria-label="anchor" href="#performing-calculations"></a>
</h3>
<p>Simply creating labels is not very interesting. The act of labeling tensor index slots becomes useful when the labels are such that they trigger implicit calculations, or they are combined with other tensors via multiplication or addition.</p>
<div class="section level4">
<h4 id="contraction">Contraction<a class="anchor" aria-label="anchor" href="#contraction"></a>
</h4>
<p>Repeated index labels with opposite position are implicitly contracted.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>j</mi></msub><mo>=</mo><msubsup><mi>a</mi><mrow><mi>i</mi><mspace width="0.278em"></mspace><mi>k</mi></mrow><mrow><mspace width="0.278em"></mspace><mi>i</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">
b_j=a_{i\;k}^{\;i}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="op">+</span><span class="va">i</span>, <span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [3] &lt;-&gt; .(-k)</span></span>
<span><span class="co">#&gt; [1]  5 13 21</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="diagonal-subsetting">Diagonal subsetting<a class="anchor" aria-label="anchor" href="#diagonal-subsetting"></a>
</h4>
<p>Repeated labels on the same position (upper or lower) will trigger diagonal subsetting.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>i</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
c_{ik}=a_{iik}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">i</span>, <span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2x3] &lt;-&gt; .(-i, -k)</span></span>
<span><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span><span class="co">#&gt; [1,]    1    5    9</span></span>
<span><span class="co">#&gt; [2,]    4    8   12</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="outer-tensor-product">Outer tensor product<a class="anchor" aria-label="anchor" href="#outer-tensor-product"></a>
</h4>
<p>The same conventions apply for arbitrary tensor multiplication.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi><mi>l</mi><mi>m</mi><mi>n</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><msub><mi>a</mi><mrow><mi>l</mi><mi>m</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
d_{ijklmn}=a_{ijk}a_{lmn}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">k</span><span class="op">)</span> <span class="op">*</span> <span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">l</span>, <span class="va">m</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2x2x3x2x2x3] &lt;-&gt; .(-i, -j, -k, -l, -m, -n)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="tensor-multiplication-w-contractions">Tensor multiplication w/ contractions<a class="anchor" aria-label="anchor" href="#tensor-multiplication-w-contractions"></a>
</h4>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><msup><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
e=a_{ijk}a^{ijk}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">k</span><span class="op">)</span> <span class="op">*</span> <span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="op">+</span><span class="va">i</span>, <span class="op">+</span><span class="va">j</span>, <span class="op">+</span><span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Scalar&gt;</span></span>
<span><span class="co">#&gt; [1] 650</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="tensor-multiplication-w-contractions-and-subsetting">Tensor multiplication w/ contractions and subsetting<a class="anchor" aria-label="anchor" href="#tensor-multiplication-w-contractions-and-subsetting"></a>
</h4>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mi>j</mi></msub><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><msubsup><mi>a</mi><mrow><mspace width="0.278em"></mspace><mi>j</mi></mrow><mrow><mi>i</mi><mspace width="0.278em"></mspace><mi>k</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">
f_j=a_{ijk}a^{i\;k}_{\;j}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">k</span><span class="op">)</span> <span class="op">*</span> <span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="op">+</span><span class="va">i</span>, <span class="va">j</span>, <span class="op">+</span><span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2] &lt;-&gt; .(-j)</span></span>
<span><span class="co">#&gt; [1] 247 403</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="tensor-addition">Tensor addition<a class="anchor" aria-label="anchor" href="#tensor-addition"></a>
</h4>
<p>Tensor addition is taking care of correct index slot matching (by index labels), so the position of the index does not matter.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><mo>=</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><mo>+</mo><msub><mi>a</mi><mrow><mi>j</mi><mi>i</mi><mi>k</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
g_{ijk} = a_{ijk} + a_{jik}
</annotation></semantics></math></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">i</span>, <span class="va">j</span>, <span class="va">k</span><span class="op">)</span> <span class="op">+</span> <span class="va">a</span> <span class="op"><a href="reference/create-tensor.html">%_%</a></span> <span class="fu"><a href="reference/dot-.html">.</a></span><span class="op">(</span><span class="va">j</span>, <span class="va">i</span>, <span class="va">k</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;Labeled Tensor&gt; [2x2x3] &lt;-&gt; .(-i, -j, -k)</span></span>
<span><span class="co">#&gt; [1] "(not reduced)"</span></span></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-guidotti2022" class="csl-entry">
Guidotti, Emanuele. 2022. “<strong>Calculus</strong>: High-Dimensional Numerical and Symbolic Calculus in <em>R</em>.” <em>Journal of Statistical Software</em> 104 (5). <a href="https://doi.org/10.18637/jss.v104.i05" class="external-link uri">https://doi.org/10.18637/jss.v104.i05</a>.
</div>
</div>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lschneiderbauer/ricci/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lschneiderbauer/ricci/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ricci</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lukas Schneiderbauer <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lschneiderbauer/ricci/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/lschneiderbauer/ricci/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/lschneiderbauer/ricci" class="external-link"><img src="https://codecov.io/gh/lschneiderbauer/ricci/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=ricci" class="external-link"><img src="https://www.r-pkg.org/badges/version/ricci" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Schneiderbauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
